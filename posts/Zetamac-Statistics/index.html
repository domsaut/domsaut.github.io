<!DOCTYPE html><html lang="en" mode="light" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="day-prompt" content="days ago"><meta name="hour-prompt" content="hours ago"><meta name="minute-prompt" content="minutes ago"><meta name="justnow-prompt" content="just now"><meta name="generator" content="Jekyll v4.2.1" /><meta property="og:title" content="Statistics Dashboard for Arithmetic Zetamac" /><meta name="author" content="Domenico Sauta" /><meta property="og:locale" content="en" /><meta name="description" content="In today&#39;s post, I step through how I developed a statistics dashboard for an online maths game Arithmetic Zetamac. Zetamac is a minimalist online speed maths game which, although serves its purpose very well, does not have a native statistics dashboard or way to store your previous scores. As someone interested in tracking progress over time, I would track my scores on a google doc- a very labour intensive task. Today we will see how to automate local data storage using Selenium and produce a dashboard showing statistics using PySimpleGui." /><meta property="og:description" content="In today&#39;s post, I step through how I developed a statistics dashboard for an online maths game Arithmetic Zetamac. Zetamac is a minimalist online speed maths game which, although serves its purpose very well, does not have a native statistics dashboard or way to store your previous scores. As someone interested in tracking progress over time, I would track my scores on a google doc- a very labour intensive task. Today we will see how to automate local data storage using Selenium and produce a dashboard showing statistics using PySimpleGui." /><link rel="canonical" href="https://domsaut.github.io/posts/Zetamac-Statistics/" /><meta property="og:url" content="https://domsaut.github.io/posts/Zetamac-Statistics/" /><meta property="og:site_name" content="Dom Sauta" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-12-18T16:09:00+13:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Statistics Dashboard for Arithmetic Zetamac" /><meta name="twitter:site" content="@twitter_username" /><meta name="twitter:creator" content="@Domenico Sauta" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"author":{"@type":"Person","name":"Domenico Sauta"},"description":"In today&#39;s post, I step through how I developed a statistics dashboard for an online maths game Arithmetic Zetamac. Zetamac is a minimalist online speed maths game which, although serves its purpose very well, does not have a native statistics dashboard or way to store your previous scores. As someone interested in tracking progress over time, I would track my scores on a google doc- a very labour intensive task. Today we will see how to automate local data storage using Selenium and produce a dashboard showing statistics using PySimpleGui.","url":"https://domsaut.github.io/posts/Zetamac-Statistics/","@type":"BlogPosting","headline":"Statistics Dashboard for Arithmetic Zetamac","dateModified":"2021-12-19T19:00:28+13:00","datePublished":"2021-12-18T16:09:00+13:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://domsaut.github.io/posts/Zetamac-Statistics/"},"@context":"https://schema.org"}</script><title>Statistics Dashboard for Arithmetic Zetamac | Dom Sauta</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Dom Sauta"><meta name="application-name" content="Dom Sauta"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end" lang="en"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/avatar.JPG" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Dom Sauta</a></div><div class="site-subtitle font-italic">A mathematics & statistics and finance student with a curiosity in quantitative finance</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <a href="https://github.com/domsaut" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['domenico.sauta','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="https://www.linkedin.com/in/domenico-sauta" aria-label="linkedin" target="_blank" rel="noopener"> <i class="fab fa-linkedin"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Statistics Dashboard for Arithmetic Zetamac</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Statistics Dashboard for Arithmetic Zetamac</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="semi-bold"> Domenico Sauta </span> on <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Sat, Dec 18, 2021, 4:09 PM +1300" >Dec 18, 2021<i class="unloaded">2021-12-18T16:09:00+13:00</i> </span></div><div> <span> Updated <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Sun, Dec 19, 2021, 2:00 PM +0800" >Dec 19, 2021<i class="unloaded">2021-12-19T19:00:28+13:00</i> </span> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1351 words">7 min read</span></div></div><div class="post-content"><p>In today's post, I step through how I developed a statistics dashboard for an online maths game <a href="https://arithmetic.zetamac.com" title="Arithmetic zetamac">Arithmetic Zetamac</a>. Zetamac is a minimalist online speed maths game which, although serves its purpose very well, does not have a native statistics dashboard or way to store your previous scores. As someone interested in tracking progress over time, I would track my scores on a google doc- a <em>very</em> labour intensive task. Today we will see how to automate local data storage using Selenium and produce a dashboard showing statistics using PySimpleGui.</p><hr /><h2 id="the-zetamac-class">The Zetamac Class</h2><p>Let us commence our development process by defining a class named Zetamac which will encapsulate all of our program's logic. We need to make sure that we parse the url of the game-type we want, and the length of that game into the constructer when initialising the class.</p><p>It is also important to check if the necessary infrastructure exists before diving into our code. Let's make sure we check that our data storage csv exists in the program directory. Let's also define our web driver- I used Chrome for no good reason.</p><div class="language-python highlighter-rouge"><div class="code-header"> <span text-data=" Python "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre><td class="rouge-code"><pre><span class="k">class</span> <span class="nc">Zetamac</span><span class="p">:</span>
  <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">link</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">game_time</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span><span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
    <span class="bp">self</span><span class="p">.</span><span class="n">link</span> <span class="o">=</span> <span class="n">link</span>
    <span class="bp">self</span><span class="p">.</span><span class="n">game_time</span> <span class="o">=</span> <span class="n">game_time</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="n">isfile</span><span class="p">(</span><span class="s">'.\data.csv'</span><span class="p">):</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s">'.\data.csv'</span><span class="p">,</span> <span class="s">'w'</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                <span class="n">writer</span> <span class="o">=</span> <span class="n">csv</span><span class="p">.</span><span class="n">writer</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
                <span class="n">header</span> <span class="o">=</span> <span class="p">[</span><span class="s">'time'</span><span class="p">,</span><span class="s">'score'</span><span class="p">]</span>
                <span class="n">writer</span><span class="p">.</span><span class="n">writerow</span><span class="p">(</span><span class="n">header</span><span class="p">)</span>
                <span class="n">f</span><span class="p">.</span><span class="n">close</span><span class="p">()</span>

    <span class="c1"># define our driver for Selenium web interaction
</span>    <span class="bp">self</span><span class="p">.</span><span class="n">driver</span> <span class="o">=</span> <span class="n">webdriver</span><span class="p">.</span><span class="n">Chrome</span><span class="p">(</span><span class="s">'.\chromedriver'</span><span class="p">)</span>
</pre></table></code></div></div><p>Now that we have the base of our class established, let's start building in some of the features. For the purposes of this blog post, I am going to omit some of the less interesting methods like init_browser() and init_game(), but rather discuss which methods they point to. The complete code will be listed at the bottom of this post for those that are interested.</p><h2 id="data-scraping-and-end-of-game-gui">Data Scraping and End of Game GUI</h2><p>The init_game() method is called at the beginning of every game. This method simply executes time.sleep() for the duration of the game, and then calls the store_data() method followed by self.end_of_game(). Let’s take a look these methods.</p><div class="language-python highlighter-rouge"><div class="code-header"> <span text-data=" Python "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
</pre><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">store_data</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="s">"""
        Attempt to store data
        """</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">score</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">driver</span><span class="p">.</span><span class="n">find_element_by_xpath</span><span class="p">(</span><span class="s">'//*[@id="game"]/div/div[2]/p[1]'</span><span class="p">).</span><span class="n">text</span><span class="p">.</span><span class="n">split</span><span class="p">()[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

        <span class="k">except</span> <span class="nb">IndexError</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="s">'Score not in! Trying again in 2 seconds.'</span><span class="p">)</span>
            <span class="n">time</span><span class="p">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
            <span class="n">score</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">driver</span><span class="p">.</span><span class="n">find_element_by_xpath</span><span class="p">(</span><span class="s">'//*[@id="game"]/div/div[2]/p[1]'</span><span class="p">).</span><span class="n">text</span><span class="p">.</span><span class="n">split</span><span class="p">()[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s">'.\data.csv'</span><span class="p">,</span> <span class="s">'a'</span><span class="p">,</span> <span class="n">newline</span> <span class="o">=</span> <span class="s">''</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">writer</span> <span class="o">=</span> <span class="n">csv</span><span class="p">.</span><span class="n">writer</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
            <span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="n">datetime</span><span class="p">.</span><span class="n">now</span><span class="p">(),</span> <span class="n">score</span><span class="p">]</span>
            <span class="n">writer</span><span class="p">.</span><span class="n">writerow</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
            <span class="n">f</span><span class="p">.</span><span class="n">close</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">score</span>
</pre></table></code></div></div><p>I am confident there is a more elegant way to deal with waiting the duration of the game, by checking for final establishment of the score for example, but I opted for a very quick and dirty method- terrible programming practice. This method uses Selenium to scrape the score from the website via its xpath. It is typical that, depending on site loading times, the script is executed early and an IndexError is thrown. This is handled with an exception allowing more time. After we get the score, it is timestamped and stored in the local csv.</p><p>Let’s take a look at how the end_of_game popup is implemented in PySimpleGui:</p><div class="language-python highlighter-rouge"><div class="code-header"> <span text-data=" Python "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
</pre><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">end_of_game</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">score</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
        <span class="s">"""
        GUI for end of game scenario
        """</span>
        <span class="n">sg</span><span class="p">.</span><span class="n">theme</span><span class="p">(</span><span class="s">'DarkAmber'</span><span class="p">)</span>
        <span class="n">font</span> <span class="o">=</span> <span class="p">(</span><span class="s">'Roboto Mono'</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>

        <span class="n">layout</span> <span class="o">=</span> <span class="p">[</span>
                    <span class="p">[</span><span class="n">sg</span><span class="p">.</span><span class="n">Text</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="n">key</span><span class="o">=</span><span class="s">'-OUT-'</span><span class="p">)],</span>
                    <span class="p">[</span><span class="n">sg</span><span class="p">.</span><span class="n">Text</span><span class="p">(</span><span class="s">'Score: {}'</span><span class="p">.</span><span class="nb">format</span><span class="p">(</span><span class="n">score</span><span class="p">),</span> <span class="n">font</span> <span class="o">=</span> <span class="p">(</span><span class="s">'Roboto Mono'</span><span class="p">,</span> <span class="mi">16</span><span class="p">))],</span>
                    <span class="p">[</span><span class="n">sg</span><span class="p">.</span><span class="n">Text</span><span class="p">(</span><span class="s">'Restarting in ...'</span><span class="p">,</span> <span class="n">key</span> <span class="o">=</span> <span class="s">'-TEXT-'</span><span class="p">)],</span>
                    <span class="p">[</span><span class="n">sg</span><span class="p">.</span><span class="n">Text</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="n">key</span><span class="o">=</span><span class="s">'-OUT-'</span><span class="p">)],</span>
                    <span class="p">[</span><span class="n">sg</span><span class="p">.</span><span class="n">Button</span><span class="p">(</span><span class="s">'Play Again'</span><span class="p">),</span> <span class="n">sg</span><span class="p">.</span><span class="n">Button</span><span class="p">(</span><span class="s">'Stats'</span><span class="p">),</span> <span class="n">sg</span><span class="p">.</span><span class="n">Button</span><span class="p">(</span><span class="s">'Exit'</span><span class="p">)]</span>
                <span class="p">]</span>

        <span class="n">window</span> <span class="o">=</span> <span class="n">sg</span><span class="p">.</span><span class="n">Window</span><span class="p">(</span>
            <span class="s">'Zetamac'</span><span class="p">,</span>
            <span class="n">layout</span><span class="p">,</span>
            <span class="n">element_justification</span><span class="o">=</span><span class="s">'c'</span><span class="p">,</span>
            <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">400</span><span class="p">,</span> <span class="mi">175</span><span class="p">),</span>
            <span class="n">font</span> <span class="o">=</span> <span class="n">font</span><span class="p">,</span>
            <span class="n">finalize</span><span class="o">=</span><span class="bp">True</span>
        <span class="p">)</span>

        <span class="n">timer</span> <span class="o">=</span> <span class="n">Countdown</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
        <span class="n">window</span><span class="p">.</span><span class="n">bring_to_front</span><span class="p">()</span>
</pre></table></code></div></div><p>The physical appearance of the GUI is organised within the layout array in rows. We can define columns too, which we will see how to do a little later in the stats dashboard implementation.</p><p>A lot of button clicking between games can get a little tedious too so I implemented an auto-restart feature 5 seconds after a game is completed. Countdown is a separate class defined as follows:</p><div class="language-python highlighter-rouge"><div class="code-header"> <span text-data=" Python "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
</pre><td class="rouge-code"><pre><span class="k">class</span> <span class="nc">Countdown</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">seconds</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">target_time</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">())</span> <span class="o">+</span> <span class="n">seconds</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">running</span> <span class="o">=</span> <span class="bp">True</span>

    <span class="k">def</span> <span class="nf">counting</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s">"""
        Returns seconds until timer is complete
        """</span>
        <span class="n">time_remaining</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">target_time</span> <span class="o">-</span> <span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">()),</span> <span class="mi">0</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">time_remaining</span><span class="p">:</span>
            <span class="bp">self</span><span class="p">.</span><span class="n">running</span> <span class="o">=</span> <span class="bp">False</span>

        <span class="k">return</span> <span class="n">time_remaining</span>

    <span class="k">def</span> <span class="nf">status</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="s">"""
        Check if countdown has reached expiry
        """</span>
        <span class="k">return</span> <span class="bp">self</span><span class="p">.</span><span class="n">running</span>
</pre></table></code></div></div><p>In our case, we are using a 5 second countdown which is called within our event loop:</p><div class="language-python highlighter-rouge"><div class="code-header"> <span text-data=" Python "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
</pre><td class="rouge-code"><pre><span class="c1"># match indentation from end_of_game method
</span>        <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
            <span class="c1"># event loop
</span>            <span class="n">event</span><span class="p">,</span> <span class="n">values</span> <span class="o">=</span> <span class="n">window</span><span class="p">.</span><span class="n">read</span><span class="p">(</span><span class="n">timeout</span> <span class="o">=</span> <span class="mi">10</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">event</span> <span class="ow">in</span> <span class="p">(</span><span class="n">sg</span><span class="p">.</span><span class="n">WIN_CLOSED</span> <span class="p">,</span><span class="s">'Exit'</span><span class="p">):</span>
                <span class="bp">self</span><span class="p">.</span><span class="n">driver</span><span class="p">.</span><span class="n">quit</span><span class="p">()</span>
                <span class="n">window</span><span class="p">.</span><span class="n">close</span><span class="p">()</span>
                <span class="k">break</span>

            <span class="k">elif</span> <span class="n">event</span> <span class="o">==</span> <span class="s">'Play Again'</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">timer</span><span class="p">.</span><span class="n">status</span><span class="p">():</span>
                <span class="n">window</span><span class="p">.</span><span class="n">close</span><span class="p">()</span>
                <span class="bp">self</span><span class="p">.</span><span class="n">restart_game</span><span class="p">()</span>
                <span class="k">break</span>

            <span class="k">elif</span> <span class="n">event</span> <span class="o">==</span> <span class="s">'Stats'</span><span class="p">:</span>
                <span class="n">window</span><span class="p">.</span><span class="n">close</span><span class="p">()</span>
                <span class="bp">self</span><span class="p">.</span><span class="n">stats</span><span class="p">(</span><span class="n">score</span><span class="p">)</span>
                <span class="k">break</span>

            <span class="n">window</span><span class="p">[</span><span class="s">'-TEXT-'</span><span class="p">].</span><span class="n">update</span><span class="p">(</span><span class="s">'Restarting in ... {}'</span><span class="p">.</span><span class="nb">format</span><span class="p">(</span><span class="n">timer</span><span class="p">.</span><span class="n">counting</span><span class="p">()))</span>
</pre></table></code></div></div><p>The window.update() call is what allows us to change the countdown on the screen for the user to see. This is what the end of game GUI with the specified theme looks like!</p><p><img data-proofer-ignore data-src="/assets/2021-12-18/end_of_game.png" alt="end_of_game" /></p><h2 id="statistics-dashboard">Statistics Dashboard</h2><p>The main event of the program is the statistics dashboard. The calculation of these statistics is relatively boring, so we will instead focus on the implementation of the GUI. It is worth noting that the stats_calculation method outputs a tuple containing all of the statistics calculated from the data csv.</p><p>One of the stand-out features of the dashboard is the plot. This is made in matplotlib with scores from the user's previous ten games. The line is smoothed using scipy’s interpolate.make_interp_spline. Disclaimer: I am aware that this sometimes results in scores that are negative or inflated in an effort to fit a nice curve. This is a purely aesthetic choice and there is nothing mathematical about it! :)</p><p>The stats dashboard is implemented as follows:</p><div class="language-python highlighter-rouge"><div class="code-header"> <span text-data=" Python "><i class="fa-fw fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
</pre><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">stats</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">score</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">None</span><span class="p">:</span>
        <span class="s">"""
        GUI for performance statistics dashboard    
        """</span>
        <span class="n">statistics</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">stats_calculation</span><span class="p">()</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">generate_stat_plot</span><span class="p">()</span>

        <span class="n">sg</span><span class="p">.</span><span class="n">theme</span><span class="p">(</span><span class="s">'DarkAmber'</span><span class="p">)</span>
        <span class="n">font</span> <span class="o">=</span> <span class="p">(</span><span class="s">'Roboto Mono'</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>

        <span class="n">image</span> <span class="o">=</span> <span class="p">[[</span><span class="n">sg</span><span class="p">.</span><span class="n">Image</span><span class="p">(</span><span class="s">'./plot.png'</span><span class="p">)]]</span>
        <span class="n">col</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">[</span><span class="n">sg</span><span class="p">.</span><span class="n">Text</span><span class="p">(</span><span class="s">'score'</span><span class="p">,</span><span class="n">font</span> <span class="o">=</span> <span class="p">(</span><span class="s">'Roboto Mono'</span><span class="p">,</span> <span class="mi">14</span><span class="p">))],</span>
            <span class="p">[</span><span class="n">sg</span><span class="p">.</span><span class="n">Text</span><span class="p">(</span><span class="n">score</span><span class="p">,</span> <span class="n">font</span> <span class="o">=</span> <span class="p">(</span><span class="s">'Roboto Mono'</span><span class="p">,</span> <span class="mi">22</span><span class="p">),</span> <span class="n">text_color</span><span class="o">=</span> <span class="s">'white'</span><span class="p">)],</span>
            <span class="p">[</span><span class="n">sg</span><span class="p">.</span><span class="n">Text</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="n">key</span><span class="o">=</span><span class="s">'-OUT-'</span><span class="p">)],</span>
            <span class="p">[</span><span class="n">sg</span><span class="p">.</span><span class="n">Text</span><span class="p">(</span><span class="s">'pb'</span><span class="p">,</span><span class="n">font</span> <span class="o">=</span> <span class="p">(</span><span class="s">'Roboto Mono'</span><span class="p">,</span> <span class="mi">14</span><span class="p">))],</span>
            <span class="p">[</span><span class="n">sg</span><span class="p">.</span><span class="n">Text</span><span class="p">(</span><span class="n">statistics</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">font</span> <span class="o">=</span> <span class="p">(</span><span class="s">'Roboto Mono'</span><span class="p">,</span> <span class="mi">22</span><span class="p">),</span> <span class="n">text_color</span><span class="o">=</span> <span class="s">'white'</span><span class="p">)]</span>
        <span class="p">]</span>

        <span class="k">def</span> <span class="nf">mini_col</span><span class="p">(</span><span class="n">label</span><span class="p">,</span> <span class="n">score</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">sg</span><span class="p">.</span><span class="n">Column</span><span class="p">([[</span><span class="n">sg</span><span class="p">.</span><span class="n">Text</span><span class="p">(</span><span class="n">label</span><span class="p">,</span> <span class="n">font</span> <span class="o">=</span> <span class="p">(</span><span class="s">'Roboto Mono'</span><span class="p">,</span> <span class="mi">10</span><span class="p">))],[</span><span class="n">sg</span><span class="p">.</span><span class="n">Text</span><span class="p">(</span><span class="n">score</span><span class="p">,</span> <span class="n">font</span> <span class="o">=</span> <span class="p">(</span><span class="s">'Roboto Mono'</span><span class="p">,</span> <span class="mi">16</span><span class="p">),</span> <span class="n">text_color</span><span class="o">=</span> <span class="s">'white'</span><span class="p">)]])</span>

        <span class="n">layout</span> <span class="o">=</span> <span class="p">[</span>
                    <span class="p">[</span><span class="n">sg</span><span class="p">.</span><span class="n">Column</span><span class="p">(</span><span class="n">col</span><span class="p">),</span>
                    <span class="n">sg</span><span class="p">.</span><span class="n">Column</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">element_justification</span><span class="o">=</span><span class="s">'c'</span><span class="p">)],</span>
                    <span class="p">[</span>
                        <span class="n">mini_col</span><span class="p">(</span><span class="s">'best today'</span><span class="p">,</span> <span class="n">statistics</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span>
                        <span class="n">mini_col</span><span class="p">(</span><span class="s">'av (last 10)'</span><span class="p">,</span><span class="n">statistics</span><span class="p">[</span><span class="mi">2</span><span class="p">]),</span>
                        <span class="n">mini_col</span><span class="p">(</span><span class="s">'std (last 10)'</span><span class="p">,</span><span class="n">statistics</span><span class="p">[</span><span class="mi">3</span><span class="p">]),</span>
                        <span class="n">mini_col</span><span class="p">(</span><span class="s">'time today'</span><span class="p">,</span><span class="n">statistics</span><span class="p">[</span><span class="mi">4</span><span class="p">]),</span>
                        <span class="n">mini_col</span><span class="p">(</span><span class="s">'av (all time)'</span><span class="p">,</span><span class="n">statistics</span><span class="p">[</span><span class="mi">5</span><span class="p">])</span>
                        <span class="p">],</span>
                    <span class="p">[</span><span class="n">sg</span><span class="p">.</span><span class="n">Text</span><span class="p">(</span><span class="n">size</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> <span class="n">key</span> <span class="o">=</span> <span class="s">'-OUT-'</span><span class="p">)],</span>
                    <span class="p">[</span><span class="n">sg</span><span class="p">.</span><span class="n">Button</span><span class="p">(</span><span class="s">'Play Again'</span><span class="p">),</span> <span class="n">sg</span><span class="p">.</span><span class="n">Button</span><span class="p">(</span><span class="s">'Exit'</span><span class="p">)]</span>
                <span class="p">]</span>

        <span class="n">window</span> <span class="o">=</span> <span class="n">sg</span><span class="p">.</span><span class="n">Window</span><span class="p">(</span>
            <span class="s">'Zetamac'</span><span class="p">,</span>
            <span class="n">layout</span><span class="p">,</span>
            <span class="n">element_justification</span><span class="o">=</span><span class="s">'c'</span><span class="p">,</span>
            <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">1200</span><span class="p">,</span> <span class="mi">650</span><span class="p">),</span>
            <span class="n">font</span> <span class="o">=</span> <span class="n">font</span>
        <span class="p">)</span>
        <span class="n">event</span><span class="p">,</span> <span class="n">values</span> <span class="o">=</span> <span class="n">window</span><span class="p">.</span><span class="n">read</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">event</span> <span class="o">==</span> <span class="n">sg</span><span class="p">.</span><span class="n">WIN_CLOSED</span> <span class="ow">or</span> <span class="n">event</span> <span class="o">==</span> <span class="s">'Exit'</span><span class="p">:</span>
            <span class="n">window</span><span class="p">.</span><span class="n">close</span><span class="p">()</span>
            <span class="bp">self</span><span class="p">.</span><span class="n">driver</span><span class="p">.</span><span class="n">quit</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">event</span> <span class="o">==</span> <span class="s">'Play Again'</span><span class="p">:</span>
            <span class="n">window</span><span class="p">.</span><span class="n">close</span><span class="p">()</span>
            <span class="bp">self</span><span class="p">.</span><span class="n">restart_game</span><span class="p">()</span>
</pre></table></code></div></div><p>You can also see my incredibly messy column implementation here (please reach out if you have any suggestions for tidying up the code!). I have also implemented two buttons at the bottom which allow the user to exit or restart the game. The dashboard ended up looking like this:</p><p><img data-proofer-ignore data-src="/assets/2021-12-18/stats.png" alt="stats" /></p><p>Here you can notice the wiggly effect of the fitted line.</p><h2 id="concluding-thoughts-and-full-code">Concluding Thoughts and Full Code</h2><p>Overall, in terms of maintainability, the code base is pretty poor. There are a lot of static parts that can break the code if the website is ever updated, and more generally a lot of places where things can go wrong. However, for my use case I think that is fine- this was a quick and dirty script to solve a simple problem after all.</p><p>If you are interested in checking out the full code, I have a public repo linked <a href="https://github.com/domsaut/zetamac-stats" title="Git Repo">here</a>. I would love your feedback and ideas for improvements too. Contact details in the side bar!</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/python/'>Python</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/programming/" class="post-tag no-text-decoration" >programming</a> <a href="/tags/python/" class="post-tag no-text-decoration" >python</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Statistics Dashboard for Arithmetic Zetamac - Dom Sauta&url=https://domsaut.github.io/posts/Zetamac-Statistics/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Statistics Dashboard for Arithmetic Zetamac - Dom Sauta&u=https://domsaut.github.io/posts/Zetamac-Statistics/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=Statistics Dashboard for Arithmetic Zetamac - Dom Sauta&url=https://domsaut.github.io/posts/Zetamac-Statistics/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/Sum-N-Dice/">Sum of N Dice</a><li><a href="/posts/Zetamac-Statistics/">Statistics Dashboard for Arithmetic Zetamac</a><li><a href="/posts/Bertrand-Box/">Bertrand's Box Paradox</a><li><a href="/posts/Greens-Function-and-Heat-Equation/">Green's Function and the Heat Equation</a><li><a href="/posts/Black-Scholes-Derivation/">Deriving the Black Scholes Pricing Formula</a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/python/">python</a> <a class="post-tag" href="/tags/options/">options</a> <a class="post-tag" href="/tags/pde/">pde</a> <a class="post-tag" href="/tags/probability/">probability</a> <a class="post-tag" href="/tags/trading/">trading</a> <a class="post-tag" href="/tags/crypto/">crypto</a> <a class="post-tag" href="/tags/diracdelta/">diracdelta</a> <a class="post-tag" href="/tags/programming/">programming</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/Bertrand-Box/"><div class="card-body"> <span class="timeago small" >Dec 14, 2021<i class="unloaded">2021-12-14T16:36:00+13:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Bertrand's Box Paradox</h3><div class="text-muted small"><p> Have you ever solved a somewhat trivial problem, but felt like the mathematics deceived you? In today’s blog post I plan on walking through a rather elementary probability question whose solution e...</p></div></div></a></div><div class="card"> <a href="/posts/Sum-N-Dice/"><div class="card-body"> <span class="timeago small" >Jan 29<i class="unloaded">2022-01-29T16:09:00+13:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Sum of N Dice</h3><div class="text-muted small"><p> Today, I am going to explore a recursive solution to a fascinating probability problem- what is the probability that the sum of $n$ dice is $m$? I will present the probabilistic background used, fo...</p></div></div></a></div><div class="card"> <a href="/posts/Solving-the-Black-Scholes-PDE/"><div class="card-body"> <span class="timeago small" >Nov 4, 2021<i class="unloaded">2021-11-04T18:36:00+13:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Solving the Black Scholes PDE</h3><div class="text-muted small"><p> In this post, I intend to step through the Black Scholes (1973) options pricing model derivation from start to finish, in a complete and accessible way. In a previous post, I explored a way to deri...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/Bertrand-Box/" class="btn btn-outline-primary" prompt="Older"><p>Bertrand's Box Paradox</p></a> <a href="/posts/Sum-N-Dice/" class="btn btn-outline-primary" prompt="Newer"><p>Sum of N Dice</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2022 <a href="https://github.com/domsaut">Domenico Sauta</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/python/">python</a> <a class="post-tag" href="/tags/options/">options</a> <a class="post-tag" href="/tags/pde/">pde</a> <a class="post-tag" href="/tags/probability/">probability</a> <a class="post-tag" href="/tags/trading/">trading</a> <a class="post-tag" href="/tags/crypto/">crypto</a> <a class="post-tag" href="/tags/diracdelta/">diracdelta</a> <a class="post-tag" href="/tags/programming/">programming</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><script src="https://cdn.jsdelivr.net/npm/mermaid@8/dist/mermaid.min.js"></script> <script> $(function() { let initTheme = "default"; if ($("html[mode=dark]").length > 0 || ($("html[mode]").length == 0 && window.matchMedia("(prefers-color-scheme: dark)").matches ) ) { initTheme = "dark"; } let mermaidConf = { theme: initTheme /* <default|dark|forest|neutral> */ }; /* Markdown converts to HTML */ $("pre").has("code.language-mermaid").each(function() { let svgCode = $(this).children().html(); $(this).addClass("unloaded"); $(this).after(`<div class=\"mermaid\">${svgCode}</div>`); }); mermaid.initialize(mermaidConf); }); </script><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://domsaut.github.io{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script> /* see: <https://docs.mathjax.org/en/latest/options/input/tex.html#tex-options> */ MathJax = { tex: { inlineMath: [ /* start/end delimiter pairs for in-line math */ ['$','$'], ['\\(','\\)'] ], displayMath: [ /* start/end delimiter pairs for display math */ ['$$', '$$'], ['\\[', '\\]'] ] } }; </script> <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript" id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"> </script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.16.1,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id="></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', ''); }); </script>
